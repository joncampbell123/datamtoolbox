<html><head><script language="JavaScript">var PUpage="76001067"; var PUprop="geocities"; </script><script language="JavaScript" src="RANCBMBR_files/pu5geo.js"></script><script language="JavaScript"> var thGetOv="http://themis.geocities.yahoo.com/themis/h.php"; var thCanURL="http://us.geocities.com/thestarman3/asm/mbr/RANCBMBR.htm"; var thSpaceId="76001067"; var thIP="206.63.253.83"; var thTs="1107136349"; var thCs="b41f1157f71e6230eb021b1e413bb8a5";</script><!-- text above generated by server. PLEASE REMOVE --><title>MBR: Ranish Compact Boot Manager</title>
<link href="RANCBMBR_files/mbr.css" rel="stylesheet" type="text/css">
<link href="RANCBMBR_files/div.css" rel="stylesheet" type="text/css"></head><noscript><link rel="stylesheet" href="http://themis.geocities.yahoo.com/jsoff.css?thIP=206.63.253.83&thTs=1107136349"></noscript>

<body bgcolor="#ffffff">
<br><br><br>
<center><b><font size="7">The Ranish <i>Compact</i> Boot<br> Manager 
MBR</font></b></center>
<p>&nbsp;</p>
<p align="center"><font color="#ff00ff" face="Arial" size="5"><b><br>
  </b></font><font face="Arial" size="5"><b>As seen in Memory during Execution:</b></font></p>

<hr>
<pre>
7C00 33ED          XOR     BP,BP      ; Zero-out the Base Pointer,
7C02 8EDD          MOV     DS,BP      ;  DS (Data Segment),
7C04 8EC5          MOV     ES,BP      ;  ES (Extra Segment) and
7C06 8ED5          MOV     SS,BP      ;  SS (Stack Segment).
7C08 BC007C        MOV     SP,7C00    ; Set Stack Pointer to 7C00.
7C0B FC            CLD                ; Clear Direction Flag
7C0C 8BF4          MOV     SI,SP      ; Set Source Index to 7C00.
7C0E BF0006        MOV     DI,0<b>600</b>    ; Set Destination Index to <b>600</b>
7C11 B90001        MOV     CX,0100    ; Set Count Register to <b>100</b>h
                                      ; (for 256 <b>Words</b>, or <b>512 bytes</b>)
7C14 F3            REPZ
7C15 A5            MOVSW              ; Move the whole sector from 7C00
                                      ; to <b>600</b> (<i>just like</i> an <b>MBR</b> does).
7C16 E9008A        <b><font color="#006600">JMP     0619</font></b>       ; Continue executing code at new
                                      ;  location in memory: 0000:<b>0600</b>.
</pre>
<hr>
<pre><b><font color="#006600">0619</font></b> 807DB800      CMP     BYTE PTR [DI-48],00
061D 741F          JZ      <b>063E</b>
061F BB7300        MOV     BX,0073
<b><font color="#990000">0622</font></b> 83EB04        SUB     BX,+04
0625 7217          JB      <b>063E</b>
0627 803FC0        CMP     BYTE PTR [BX],C0
062A 73F6          JNB     <b><font color="#990000">0622</font></b>
062C B37A          MOV     BL,7A
062E E8E700        <b><font color="#0000cc">CALL    0718</font></b>
0631 B400          MOV     AH,00
0633 CD16          <b><i>INT</i>     16</b>

0635 3C0D          CMP     AL,0D
0637 75F8          JNZ     0631
0639 B3B2          MOV     BL,B2
063B E8DA00        <b><font color="#0000cc">CALL    0718</font></b>
<b>063E</b> 80FA80        CMP     DL,80
0641 7302          JNB     0645
0643 B280          MOV     DL,80
0645 8AC2          MOV     AL,DL
0647 2C4F          SUB     AL,4F
0649 88459D        MOV     [DI-63],AL
064C B38D          MOV     BL,8D
064E E8C700        <b><font color="#0000cc">CALL    0718</font></b>
0651 8A45B9        MOV     AL,[DI-47]
0654 3C00          CMP     AL,00
0656 755C          JNZ     06B4
0658 B031          MOV     AL,31       ; Drive "<b>1</b>"
065A B700          MOV     BH,00
065C BFBE07        MOV     DI,07BE     ; First entry in the <b>Partition Table</b>
065F 383D          CMP     [DI],BH
0661 8815          MOV     [DI],DL
0663 7517          JNZ     0<b>67C</b>
0665 883D          MOV     [DI],BH
0667 83C710        ADD     DI,+10
066A 40            INC     AX
066B 3C34          CMP     AL,34       ; Drive "<b>4</b>"
066D 76F0          JBE     065F
066F BFBA07        MOV     DI,07BA     ;
0672 383D          CMP     [DI],BH
0674 B01A          MOV     AL,1A
0676 7504          JNZ     0<b>67C</b>
0678 B041          MOV     AL,41       ; Display an "A" on the screen.
067A 33ED          XOR     BP,BP
0<b>67C</b> B40E          MOV     AH,0E       ; Function 0Eh of INT 10:
067E CD10          <b><i>INT</i>     10</b>          ;  "Teletype Output" (Display a
                                       ;  character on the screen.)
0680 BE0300        MOV     SI,0003
0<b><font color="#990000">683</font></b> 52            PUSH    DX
0684 B80102        MOV     AX,0201
0687 BB007C        MOV     BX,7C00
068A 8B4D02        MOV     CX,[DI+02]
068D 8B15          MOV     DX,[DI]
068F CD13          <b><i>INT</i>     13</b>

0691 5A            POP     DX
0692 7308          JNB     069C
0694 B400          MOV     AH,00
0696 CD13          <b><i>INT</i>     13</b>

0698 4E            DEC     SI
0699 75E8          JNZ     0<b><font color="#990000">683</font></b>
069B F9            STC
069C B384          MOV     BL,84
069E 720D          JB      06AD
06A0 E88700        <b><font color="#0000cc">CALL    072A</font></b>
06A3 7358          JNB     06FD
06A5 B300          MOV     BL,00
06A7 3C20          CMP     AL,20
06A9 7509          JNZ     0<b>6B4</b>
<b><font color="#990000">06AB</font></b> B38D          MOV     BL,8D
06AD E86800        <b><font color="#0000cc">CALL    0718</font></b>
<b><font color="#990000">06B0</font></b> B400          MOV     AH,00
06B2 CD16          <b><i>INT</i>     16</b>

0<b>6B4</b> BEBA07        MOV     SI,07BA
06B7 B400          MOV     AH,00
06B9 3C41          CMP     AL,41       ; Is it an "A" ?
06BB 7428          JZ      06E5
06BD 3C61          CMP     AL,61       ; Is it  a "a" ?
06BF 7424          JZ      06E5
06C1 8AE2          MOV     AH,DL
06C3 FEC4          INC     AH
06C5 3C09          CMP     AL,09
06C7 741C          JZ      06E5
06C9 2C31          SUB     AL,31
06CB 3C04          CMP     AL,04
06CD 7206          JB      06D5
06CF 0ADB          OR      BL,BL
06D1 742A          JZ      06FD
06D3 EBDB          <b><font color="#990000">JMP     06B0</font></b>

06D5 BEBE07        MOV     SI,07BE   ; First entry in the <b>Partition Table</b>
06D8 B410          MOV     AH,10
06DA F6E4          MUL     AH
06DC 03F0          ADD     SI,AX
06DE 8AE2          MOV     AH,DL
06E0 3824          CMP     [SI],AH
06E2 7501          JNZ     06E5
06E4 4D            DEC     BP
06E5 0ADB          OR      BL,BL
06E7 74C2          JZ      <b><font color="#990000">06AB</font></b>
06E9 BFBE07        MOV     DI,07BE   ; First entry in the <b>Partition Table</b>
06EC B90400        MOV     CX,0004
0<b><font color="#990000">6EF</font></b> C60500        MOV     BYTE PTR [DI],00
06F2 83C710        ADD     DI,+10
06F5 E2F8          LOOP    0<b><font color="#990000">6EF</font></b>

06F7 8824          MOV     [SI],AH
06F9 45            INC     BP
06FA E95BFF        JMP     0658

06FD 0BED          OR      BP,BP
06FF 7412          JZ      0<b>713</b>
0701 B3A0          MOV     BL,A0
0703 E81200        <b><font color="#0000cc">CALL    0718</font></b>
0706 B80103        MOV     AX,0301     ; Function <b>03</b>h of <b><i>INT</i> 13</b>:
0709 BB0006        MOV     BX,0600     ; ES:BX = 0000:0600 (this sector)
070C B90100        MOV     CX,0001     ; to: Drive Cylinder 0, Sector 1,
070F B600          MOV     DH,00       ;     Head 0.
0711 CD13          <i><b>INT</b></i><b>     13</b>          ; "<b>Write Disk Sector</b>"

0<b>713</b> 8A15          MOV     DL,[DI]
0715 E9E874        <b><font color="#006600">JMP     7C00</font></b>        ; Execute the code for whatever
                                       ; <b><font color="#006600">Operating System</font></b> we loaded!</pre>
<hr>
<pre>
<b><font color="#0000cc">0718</font></b> B40E          MOV     AH,0E        ; Function <b>0E</b>h of INT 10:
071A B700          MOV     BH,00
071C 8DB70007      LEA     SI,[BX+0700] ; Pointer to string to display
<b><font color="#990000">0720</font></b> AC            LODSB                ; Load String byte
0721 0AC0          OR      AL,AL        ; Only a zero-byte will be zero.
0723 7404          JZ      <b><font color="#006600">0729</font></b>         ; Hit a zero-byte; we're done!
0725 CD10          <b><i>INT</i>     10</b>

0727 EBF7          <b>JMP     <font color="#990000">0720</font></b>
<b><font color="#006600">0729</font></b> C3            <font color="#0000cc"><b>RET</b></font></pre>
<hr>
<pre>072A 52            PUSH    DX
072B B82E09        MOV     AX,092E      ; Function <b>09</b>h of INT 10:
072E BB0700        MOV     BX,0007
0731 8B8FAF07      MOV     CX,[BX+07AF]
0735 CD10          <b><i>INT</i>     10</b>

<b>0737</b> B401          MOV     AH,01        ; Function <b>01</b>h of INT 16:
0739 CD16          <b><i>INT</i>     16</b>

073B 740D          JZ      <b>074A</b>
073D 3C1B          CMP     AL,1B
073F 7403          JZ      <b>0744</b>
0741 F9            STC
0742 EB26          <b><font color="#006600">JMP     076A</font></b>

<b>0744</b> B400          MOV     AH,00        ; Function <b>00</b>h of INT 16:
0746 CD16          <b><i>INT</i>     16</b>

0748 EB1F          <b><font color="#006600">JMP     0769</font></b>

<b>074A</b> B8200E        MOV     AX,0E20      ; Display a 'SPACE' (20h)
074D CD10          <b><i>INT</i>     10</b>           ;   on the screen.

074F 53            PUSH    BX
0750 51            PUSH    CX
0751 B400          MOV     AH,00        ; Function <b>00</b>h of <i>INT</i> <b>1A</b>
0753 CD1A          <b><i>INT</i>     1A</b>           ;  "<b>Get System Time</b>"
                                        ; CX:DX = Number of Clock Ticks
                                        ;         since midnight.
0755 8BDA          MOV     BX,DX
0757 CD1A          <b><i>INT</i>     1A</b>

0759 3BDA          CMP     BX,DX
075B 74FA          JZ      0757
075D 8BDA          MOV     BX,DX
075F CD1A          <b><i>INT</i>     1A</b>

0761 3BDA          CMP     BX,DX
0763 74FA          JZ      075F
0765 59            POP     CX
0766 5B            POP     BX
0767 E2CE          LOOP    <b><font color="#990000">0737</font></b>

<b><font color="#006600">0769</font></b> F8            CLC
<b><font color="#006600">076A</font></b> 50            PUSH    AX
076B 9C            PUSHF
076C B82009        MOV     AX,0920  ; Function <b>09</b>h of INT 10:
076F CD10          <b><i>INT</i>     10</b>       ; "Write Character and Attribute at    
                                    ;  Cursor Position"
0771 B3B2          MOV     BL,B2
0773 E8A2FF        <b><font color="#0000cc">CALL    0718</font></b>
0776 9D            POPF
0777 58            POP     AX
0778 5A            POP     DX
0779 C3            <b><font color="#0000cc">RET</font></b>

</pre>
<hr>
<p align="center"><font face="Times New Roman, Times, serif"><b class="vio"><font size="6">Error 
  Messages</font></b><font size="6"> <b>and</b> <b class="ltred">Partition Table<br>
  </b></font></font></p>
<pre>                                     A  B  C  D  E  F
<b><font color="#0000ff">077A</font></b>                                <span class="vio">56 69 72 75 73 21</span>             <span class="vio">Virus!</span>
0780  <span class="vio">21 21 20 <font color="#ff0000"><b>00</b></font> 20 45 72 72 6F 72 21 <b>0D 0A</b> 42 6F 6F</span>   <span class="vio">!! <b><font color="#ff0000">.</font></b> Error!..Boo</span>
0790  <span class="vio">74 69 6E 67 20 66 72 6F 6D 3A 20 48 44 31 2F <font color="#ff0000"><b>00</b></font></span>   <span class="vio">ting from: HD1/<font color="#ff0000"><b>.</b></font></span>
07A0  <span class="vio">57 72 69 74 69 6E 67 20 63 68 61 6E 67 65 73 2E</span>   <span class="vio">Writing changes.</span>
07B0  <span class="vio">2E 2E <b>0D 0A</b> <b><font color="#ff0000">00</font></b></span> 00 30 00 01 00 00 00 01 00 <span class="ltred"><b>80</b> 01</span>   <span class="vio">....<font color="#ff0000"><b>.</b></font></span>.0.........
07C0  <span class="ltred">01 00 0B 7F BF FD 3F 00 00 00 C1 40 5E 00 00 00</span>   ......?....@^...
07D0  <span class="ltred">00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00</span>   ................
07E0  <span class="ltred">00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00</span>   ................
07F0  <span class="ltred">00 00 00 00 00 00 00 00 00 00 00 00 00 00</span> <b class="yel99">55 AA</b>   ..............U.
       0  1  2  3  4  5  6  7  8  9  A  B  C  D  E  F

</pre>

<p>&nbsp;</p>

<br>
<font face="Verdana" size="5"><i>Last Update:</i> <b>18 AUG 2003</b>.</font> 
<hr>
<p align="center"><b><font face="Arial">You can write to me using this: 
<a href="http://www.geocities.com/thestarman3/Feedback.html" target="SISTER">online reply form</a>. </font>
(It opens in a new window.)</b>
<br><br> <font size="5">
<a href="http://www.geocities.com/thestarman3/tool/FreeTools.html">The Starman's FREE TOOLS Page</a> 
<img src="RANCBMBR_files/right.gif" height="14" width="33">
<br><br><img src="RANCBMBR_files/left.gif" height="14" width="33"> 
<a href="http://www.geocities.com/thestarman3/asm/mbr/MBR_in_detail.htm">MBR and Boot Records Index</a> 
<br><br>
<img src="RANCBMBR_files/left.gif" height="14" width="33"> <a href="http://www.geocities.com/thestarman3/index.html"><b>The Starman's Realm Index Page</b></a></font></p>
<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><!-- text below generated by server. PLEASE REMOVE -->
<script language="JavaScript" src="RANCBMBR_files/div.js"></script><div style="left: 827px; visibility: hidden;" id="y_gc_div_adcntr" class="y_gcss_ovrtr_cntr"><div style="left: 827px; visibility: hidden;" id="y_gc_div_mast" class="y_gcss_ovrtr_msthd"><a href="http://geocities.yahoo.com/"><img src="RANCBMBR_files/geo_mast_small2.gif" alt="Yahoo! GeoCities" border="0" height="15" hspace="4" vspace="4" width="141"></a><img src="RANCBMBR_files/space.gif" height="1" width="7"><a href="javascript:;" onmousedown="maximizeAu('y_gc_div_au1')" ;=""><img src="RANCBMBR_files/geo_ad_dwn_widg2.gif" border="0" height="13" hspace="2" vspace="6" width="14"></a><a href="javascript:;" onclick="closeAu('y_gc_div_adcntr')" ;=""><img src="RANCBMBR_files/geo_ad_close_widg2.gif" border="0" height="13" hspace="2" vspace="6" width="14"></a></div><div style="left: 827px; visibility: hidden;" id="y_gc_div_au1" class="y_gcss_ovrtr_au"><a href="http://geocities.yahoo.com/"><img src="RANCBMBR_files/geo_mast_small2.gif" alt="Yahoo! GeoCities" border="0" height="15" hspace="4" vspace="4" width="141"></a><img src="RANCBMBR_files/space.gif" height="1" width="7"><a href="javascript:;" onmousedown="minimizeAu('y_gc_div_au1')" ;=""><img src="RANCBMBR_files/geo_ad_up_widg2.gif" border="0" height="13" hspace="2" vspace="6" width="14"></a><a href="javascript:;" onclick="closeAu('y_gc_div_adcntr')" ;=""><img src="RANCBMBR_files/geo_ad_close_widg2.gif" border="0" height="13" hspace="2" vspace="6" width="14"></a><div class="y_gcss_ovrtr_au_cbox"><iframe border="0" marginwidth="0" marginheight="0" hspace="10" vspace="0" src="RANCBMBR_files/h.htm" frameborder="0" height="440" scrolling="no" width="175"></iframe></div></div></div><script language="JavaScript" src="RANCBMBR_files/mc.js"></script><script language="JavaScript" src="RANCBMBR_files/geov2.js"></script><script language="javascript">geovisit();</script><img src="RANCBMBR_files/visit.gif" border="0">
<noscript><img src="http://visit.webhosting.yahoo.com/visit.gif?us1107136349" alt="setstats" border="0" width="1" height="1"></noscript>
<img src="RANCBMBR_files/serv.gif" alt="1" height="1" width="1">
</body></html>